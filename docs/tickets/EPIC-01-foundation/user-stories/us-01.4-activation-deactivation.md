# US-01.4: As a WordPress administrator, I need proper plugin activation/deactivation

**Ticket ID:** US-01.4
**Ticket Type:** User Story
**Epic:** EPIC-01
**Priority:** P0
**Story Points:** 3
**Status:** Not Started
**Blockers:** None

---

## Description

As a WordPress administrator, I need proper plugin activation and deactivation functionality to ensure the plugin initializes correctly when activated and cleans up appropriately when deactivated. The plugin must preserve all data during deactivation (data should only be removed during uninstall).

The activation process should flush rewrite rules and save the plugin version to WordPress options. The deactivation process should flush rewrite rules but preserve all plugin data.

---

## Acceptance Criteria

- [ ] Activation hook registered
- [ ] Deactivation hook registered
- [ ] GAP_Activator class created
- [ ] Flush rewrite rules on activation
- [ ] Plugin version saved to options on activation
- [ ] Data preserved on deactivation
- [ ] No errors during activation/deactivation

---

## Tasks

- [ ] Create `includes/class-gap-activator.php` (60 min)
- [ ] Implement `activate()` static method (30 min)
- [ ] Implement `deactivate()` static method (15 min)
- [ ] Register activation hook in main plugin file (10 min)
- [ ] Register deactivation hook in main plugin file (10 min)
- [ ] Test activation/deactivation cycle (15 min)

---

## GAP_Activator Methods

```php
class GAP_Activator {
    public static function activate() {
        // Flush rewrite rules
        // Save plugin version to options
        // Perform any initial setup
    }

    public static function deactivate() {
        // Flush rewrite rules
        // DO NOT delete data (only on uninstall)
    }
}
```

---

## Definition of Done

- [ ] GAP_Activator class created in includes/class-gap-activator.php
- [ ] activate() static method implemented
- [ ] deactivate() static method implemented
- [ ] Activation hook registered in ga-plugin.php
- [ ] Deactivation hook registered in ga-plugin.php
- [ ] Rewrite rules flushed on activation
- [ ] Plugin version saved to options on activation
- [ ] Rewrite rules flushed on deactivation
- [ ] Plugin data preserved after deactivation
- [ ] No errors during activation/deactivation cycle
- [ ] ABSPATH security check in class file
- [ ] Code documented with inline comments
- [ ] Code follows WordPress coding standards
- [ ] Manual testing completed (activate/deactivate/reactivate)
- [ ] Code review completed
- [ ] Committed to version control

---

**Created:** 2025-10-16
**Last Updated:** 2025-10-16
