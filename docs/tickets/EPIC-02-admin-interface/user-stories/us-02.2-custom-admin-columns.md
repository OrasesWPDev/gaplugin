# US-02.2: Custom Admin Columns for Tracking Script Details

**Ticket ID:** US-02.2
**Epic:** EPIC-02 (Custom Post Type & Admin Interface)
**Priority:** P1
**Story Points:** 3
**Status:** Not Started

---

## User Story

As an administrator, I need custom admin columns to view tracking script details at a glance, so I can quickly see important information about each tracking script without opening the editor.

---

## Acceptance Criteria

- [ ] Tracking IDs column shows extracted GA4/GTM tracking IDs
- [ ] Placement column shows script placement location (head, body_top, body_bottom, footer)
- [ ] Scope column shows whether script is global or for specific pages
- [ ] Target Pages column shows page count when scope is specific_pages
- [ ] Status column shows active/inactive with visual color indicator
- [ ] Empty fields display "—" instead of blank spaces
- [ ] Columns are sortable where applicable (Status, Scope)
- [ ] Columns display correctly on different screen widths

---

## Implementation Tasks

| # | Task | Time Est | Status |
|---|------|----------|--------|
| 1 | Implement add_custom_columns() filter method | 30 min | ⏳ |
| 2 | Implement render_custom_columns() action method | 60 min | ⏳ |
| 3 | Add CSS styles for visual status indicators | 20 min | ⏳ |
| 4 | Test all column outputs and formatting | 20 min | ⏳ |

**Total Estimated Time:** 130 minutes (2.17 hours)

---

## Column Specifications

### Column 1: Tracking IDs
- **Format:** GA4 / GTM identifiers extracted from _gap_script_content
- **Display:** "GA-XXXXXX" or "GTM-XXXXXX" with type badge
- **Empty:** "—"

### Column 2: Placement
- **Format:** Selected placement value
- **Options:** Head, Body Top, Body Bottom, Footer
- **Empty:** "—"

### Column 3: Scope
- **Format:** Selected scope value
- **Options:** Global, Specific Pages
- **Empty:** "—"

### Column 4: Target Pages
- **Format:** Number of pages (e.g., "5 pages")
- **Display:** Only when Scope = Specific Pages
- **Empty:** "—"

### Column 5: Status
- **Format:** Visual indicator with color
- **Active:** Green circle + "Active"
- **Inactive:** Gray circle + "Inactive"
- **Empty:** "—"

---

## CSS Styling

```css
/* Status column styling */
.gap-status-active {
    color: #46b450;
    font-weight: bold;
}

.gap-status-active::before {
    content: "● ";
    margin-right: 4px;
}

.gap-status-inactive {
    color: #999;
}

.gap-status-inactive::before {
    content: "● ";
    margin-right: 4px;
}

/* Column width adjustments */
.column-gap-tracking-ids {
    width: 120px;
}

.column-gap-placement {
    width: 100px;
}

.column-gap-scope {
    width: 100px;
}

.column-gap-target-pages {
    width: 100px;
}

.column-gap-status {
    width: 100px;
}
```

---

## Implementation Details

### Add Custom Columns Method

```php
public function add_custom_columns($columns) {
    // This method modifies the column headers array
    // Add new columns in desired order
    // Remove unwanted default columns
    return $new_columns;
}
```

### Render Custom Columns Method

```php
public function render_custom_columns($column, $post_id) {
    // Get post meta for the tracking script
    // Format and display column content
    // Apply CSS classes for styling
}
```

---

## Testing Checklist

### Visual Testing

- [ ] Navigate to Tracking Scripts admin page
- [ ] Verify all 5 columns display with correct headers
- [ ] Create 3 test tracking scripts with different configurations
- [ ] Verify Tracking IDs column populated correctly
- [ ] Verify Placement column shows selected values
- [ ] Verify Scope column shows global/specific_pages
- [ ] Verify Target Pages shows count when applicable
- [ ] Verify Status column shows active/inactive with colors
- [ ] Verify empty fields show "—"

### Responsive Testing

- [ ] Test on desktop (1920px width)
- [ ] Test on tablet (768px width)
- [ ] Test on mobile (375px width)
- [ ] Verify columns stack or scroll appropriately

### Sorting Testing

- [ ] Test Status column is sortable
- [ ] Test Scope column is sortable
- [ ] Verify sorting works correctly in ascending/descending

---

## Dependencies

**Upstream:**
- US-02.1: Custom post type registration (must exist)
- TT-02.1: GAP_CPT class with custom column methods

**Downstream:**
- None (informational only)

---

## Definition of Done

- [ ] All 5 columns rendering correctly
- [ ] Column values pulled from correct meta fields
- [ ] Empty fields display "—"
- [ ] Status indicators have correct colors
- [ ] CSS styling applied without conflicts
- [ ] Columns responsive on different screen sizes
- [ ] All acceptance criteria passing
- [ ] Manual testing completed
- [ ] Code review passed
- [ ] Ready for deployment

---

**File Modified:** `includes/class-gap-cpt.php` (add column methods)
**Files Created:** `assets/css/admin-columns.css` (optional, if separate from main admin.css)

---

**Created:** 2025-10-16
**Last Updated:** 2025-10-16
**Blocks:** Nothing (standalone enhancement)
**Blocked By:** US-02.1
