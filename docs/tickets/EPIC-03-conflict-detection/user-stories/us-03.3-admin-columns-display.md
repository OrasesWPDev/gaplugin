# US-03.3: Display Extracted Tracking IDs in Admin Columns

**Ticket Type:** User Story
**Epic:** EPIC-03 Conflict Detection System
**Story Points:** 2
**Time Estimate:** 65 minutes

## Description

As an administrator, I need to see extracted tracking IDs in admin columns so that I can quickly identify which tracking IDs are being used by each script without opening individual posts.

This provides at-a-glance visibility of tracking IDs directly in the tracking scripts list, making it easy to spot potential duplicates and understand script configuration.

## Acceptance Criteria

- [ ] Tracking IDs column displays extracted IDs
- [ ] Each ID shows type badge (GA4 or GTM)
- [ ] Multiple IDs displayed on separate lines
- [ ] "None detected" shown if no IDs found
- [ ] IDs are color-coded by type

## Implementation Tasks

- [ ] Update render_custom_columns() in GAP_CPT (30 min)
- [ ] Add CSS for ID type badges (20 min)
- [ ] Test with various ID combinations (15 min)

## Technical Details

### Display Format

```
G-ABC1234567 (Google Analytics 4)
GTM-XYZ7890 (Google Tag Manager)
```

### Implementation

```php
case 'tracking_ids':
    $extracted_ids = get_post_meta($post_id, '_gap_extracted_ids', true);

    if (empty($extracted_ids) || !is_array($extracted_ids)) {
        echo '<span class="gap-no-ids">None detected</span>';
    } else {
        foreach ($extracted_ids as $id_data) {
            $type_class = 'gap-id-' . esc_attr($id_data['type']);
            echo '<div class="gap-tracking-id ' . $type_class . '">';
            echo esc_html($id_data['id']) . ' (' . esc_html($id_data['name']) . ')';
            echo '</div>';
        }
    }
    break;
```

### CSS Styling

```css
.gap-tracking-id {
    padding: 2px 8px;
    margin: 2px 0;
    border-radius: 3px;
    font-family: monospace;
    font-size: 12px;
}

.gap-id-ga4 {
    background: #e3f2fd;
    color: #1565c0;
}

.gap-id-gtm {
    background: #f3e5f5;
    color: #6a1b9a;
}

.gap-no-ids {
    color: #999;
    font-style: italic;
}
```

## Test Cases

### Test Case 1: Display GA4 ID
1. Create script with GA4 tracking code
2. Save script
3. Go to tracking scripts list
4. Verify Tracking IDs column shows GA4 ID with blue badge

### Test Case 2: Display GTM ID
1. Create script with GTM tracking code
2. Save script
3. Go to tracking scripts list
4. Verify Tracking IDs column shows GTM ID with purple badge

### Test Case 3: Display Multiple IDs
1. Create script with both GA4 and GTM codes
2. Save script
3. Go to tracking scripts list
4. Verify both IDs displayed on separate lines
5. Verify each has correct color coding

### Test Case 4: No IDs Detected
1. Create script with generic JavaScript
2. Save script
3. Go to tracking scripts list
4. Verify shows "None detected" in gray italic text

## Dependencies

- US-03.2: Automatic ID Extraction (IDs must be stored in post meta)
- EPIC-02: Admin Interface (requires CPT and custom columns)

## Definition of Done

- [ ] Code complete and tested
- [ ] Meets WordPress coding standards
- [ ] CSS properly enqueued
- [ ] All test cases passing
- [ ] Responsive design verified
- [ ] PR review complete
- [ ] Ready to merge

## Notes

Generated: 2025-10-16

Color coding helps administrators quickly distinguish between GA4 and GTM tracking IDs at a glance.
