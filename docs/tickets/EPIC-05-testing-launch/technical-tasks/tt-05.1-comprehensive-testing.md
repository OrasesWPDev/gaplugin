# TT-05.1: Comprehensive Functional Testing Execution

**Ticket Type:** Technical Task (Testing)
**Epic:** EPIC-05 Testing, Polish & Launch
**Time Estimate:** 4 hours
**Assignee:** QA Team

## Description

Execute comprehensive functional testing across all plugin features to validate complete functionality before release. This systematic testing covers activation, CPT operations, meta fields, frontend output, scope filtering, duplicate detection, and admin UI.

## Test Execution Plan

### Phase 1: Setup & Baseline (30 min)

1. **Prepare Test Environment**
   - Fresh WordPress 6.x install
   - Default theme (Twenty Twenty-Four)
   - No other plugins active
   - PHP 8.0+
   - MySQL 8.0+

2. **Document Environment**
   ```
   WordPress: ______
   PHP: ______
   Theme: ______
   Browser: ______
   ```

3. **Take Baseline Screenshots**
   - Plugins page (before activation)
   - Admin menu (before activation)
   - Frontend (before activation)

### Phase 2: Activation/Deactivation Tests (30 min)

#### Test 1.1: Plugin Activation
- [ ] Upload ga-plugin.zip
- [ ] Click Activate
- [ ] Verify no PHP errors
- [ ] Verify "Tracking Scripts" menu appears
- [ ] Screenshot: Admin menu with new item

#### Test 1.2: Plugin Deactivation
- [ ] Click Deactivate
- [ ] Verify no PHP errors
- [ ] Verify menu removed
- [ ] Screenshot: Admin menu without item

#### Test 1.3: Plugin Reactivation
- [ ] Click Activate again
- [ ] Verify no errors
- [ ] Verify menu returns
- [ ] Screenshot: Successful reactivation

### Phase 3: CPT Functionality Tests (45 min)

#### Test 2.1: Access Tracking Scripts
- [ ] Click "Tracking Scripts" menu
- [ ] Verify list page loads
- [ ] Verify empty state message (if no scripts)
- [ ] Screenshot: Empty tracking scripts list

#### Test 2.2: Add New Script
- [ ] Click "Add New"
- [ ] Verify page loads
- [ ] Verify meta box displays
- [ ] Verify all fields present
- [ ] Screenshot: Add New page

#### Test 2.3: Save Draft
- [ ] Enter title: "Test Draft Script"
- [ ] Click "Save Draft"
- [ ] Verify saves successfully
- [ ] Verify appears in Drafts
- [ ] Screenshot: Draft in list

#### Test 2.4: Publish Script
- [ ] Open draft
- [ ] Click "Publish"
- [ ] Verify publishes successfully
- [ ] Verify appears in published list
- [ ] Screenshot: Published script

#### Test 2.5: Edit Script
- [ ] Open published script
- [ ] Change title to "Modified Test Script"
- [ ] Click "Update"
- [ ] Verify changes save
- [ ] Verify title updates in list
- [ ] Screenshot: Updated script

#### Test 2.6: Trash Script
- [ ] Open script
- [ ] Click "Move to Trash"
- [ ] Verify moves to trash
- [ ] Verify removed from published list
- [ ] Verify appears in Trash
- [ ] Screenshot: Script in trash

### Phase 4: Meta Field Tests (60 min)

#### Test 3.1: Script Content Persistence
- [ ] Create new script
- [ ] Enter GA4 code:
   ```javascript
   <script>
   gtag('config', 'G-TEST123456');
   </script>
   ```
- [ ] Save
- [ ] Reopen
- [ ] Verify content exact match
- [ ] Screenshot: Content persisted

#### Test 3.2: Placement Options
For each placement option:
- [ ] Head
  - Select "head"
  - Save
  - Reopen
  - Verify "head" still selected
- [ ] Body Top
  - Select "body_top"
  - Save
  - Reopen
  - Verify "body_top" still selected
- [ ] Body Bottom
  - Select "body_bottom"
  - Save
  - Reopen
  - Verify "body_bottom" still selected
- [ ] Footer
  - Select "footer"
  - Save
  - Reopen
  - Verify "footer" still selected
- [ ] Screenshot: Each placement option

#### Test 3.3: Scope - Global
- [ ] Create new script
- [ ] Select "Global (All Pages)"
- [ ] Verify Target Pages selector hidden
- [ ] Save
- [ ] Reopen
- [ ] Verify "Global" selected
- [ ] Verify Target Pages still hidden
- [ ] Screenshot: Global scope selected

#### Test 3.4: Scope - Specific Pages
- [ ] Change to "Specific Pages"
- [ ] Verify Target Pages selector appears
- [ ] Select 2-3 pages
- [ ] Save
- [ ] Reopen
- [ ] Verify "Specific Pages" selected
- [ ] Verify selected pages still selected
- [ ] Screenshot: Specific pages with selections

#### Test 3.5: Active Status - Checked
- [ ] Check "Active" checkbox
- [ ] Save
- [ ] Reopen
- [ ] Verify checkbox still checked
- [ ] Screenshot: Active checkbox checked

#### Test 3.6: Active Status - Unchecked
- [ ] Uncheck "Active" checkbox
- [ ] Save
- [ ] Reopen
- [ ] Verify checkbox still unchecked
- [ ] Screenshot: Active checkbox unchecked

### Phase 5: Frontend Output Tests (60 min)

#### Test 4.1: Head Placement Output
- [ ] Create script: "Test Head Script"
- [ ] Placement: head
- [ ] Scope: Global
- [ ] Active: Yes
- [ ] Content: `<script>console.log('head');</script>`
- [ ] Publish
- [ ] Load frontend (homepage)
- [ ] View page source
- [ ] Verify script in `<head>` section
- [ ] Verify between `<!-- GA Plugin: head -->` comments
- [ ] Screenshot: Page source showing head script

#### Test 4.2: Body Top Placement Output
- [ ] Create script: "Test Body Top Script"
- [ ] Placement: body_top
- [ ] Scope: Global
- [ ] Active: Yes
- [ ] Content: `<script>console.log('body_top');</script>`
- [ ] Publish
- [ ] Load frontend
- [ ] View page source
- [ ] Verify script after `<body>` tag
- [ ] Verify before visible content
- [ ] Screenshot: Page source showing body_top script

#### Test 4.3: Body Bottom Placement Output
- [ ] Create script: "Test Body Bottom Script"
- [ ] Placement: body_bottom
- [ ] Scope: Global
- [ ] Active: Yes
- [ ] Content: `<script>console.log('body_bottom');</script>`
- [ ] Publish
- [ ] Load frontend
- [ ] View page source
- [ ] Verify script before `</body>` tag
- [ ] Verify after page content
- [ ] Screenshot: Page source showing body_bottom script

#### Test 4.4: Footer Placement Output
- [ ] Create script: "Test Footer Script"
- [ ] Placement: footer
- [ ] Scope: Global
- [ ] Active: Yes
- [ ] Content: `<script>console.log('footer');</script>`
- [ ] Publish
- [ ] Load frontend
- [ ] View page source
- [ ] Verify script at very end
- [ ] Verify after body_bottom scripts
- [ ] Screenshot: Page source showing footer script

#### Test 4.5: Script Execution Verification
- [ ] Load frontend page
- [ ] Open browser DevTools console
- [ ] Verify console shows:
   - "head"
   - "body_top"
   - "body_bottom"
   - "footer"
- [ ] Verify no JavaScript errors
- [ ] Screenshot: Console output

### Phase 6: Scope Filtering Tests (45 min)

#### Test 5.1: Global Script on Multiple Pages
- [ ] Create "Global Test Script"
- [ ] Scope: Global
- [ ] Active: Yes
- [ ] Publish
- [ ] Load homepage → Verify script appears
- [ ] Load page → Verify script appears
- [ ] Load post → Verify script appears
- [ ] Load archive → Verify script appears
- [ ] Screenshot: Each page showing script

#### Test 5.2: Specific Page Script
- [ ] Create "About Page Script"
- [ ] Scope: Specific Pages
- [ ] Target: Select "About" page only
- [ ] Active: Yes
- [ ] Publish
- [ ] Load "About" page → Verify script appears
- [ ] Load homepage → Verify script does NOT appear
- [ ] Load other page → Verify script does NOT appear
- [ ] Screenshot: About page with script
- [ ] Screenshot: Homepage without script

### Phase 7: Duplicate Detection Tests (60 min)

#### Test 6.1: Theme Duplicate Detection
- [ ] Add to theme header.php:
   ```php
   <script>gtag('config', 'G-DUPLICATE123');</script>
   ```
- [ ] Create plugin script with same ID
- [ ] Set active and global
- [ ] Load frontend
- [ ] View page source
- [ ] Verify plugin script NOT output
- [ ] Verify HTML comment explains skip
- [ ] Screenshot: Page source with skip comment

#### Test 6.2: Plugin Duplicate Detection
- [ ] Create "Script A" with G-TEST999 (head)
- [ ] Create "Script B" with G-TEST999 (footer)
- [ ] Both active and global
- [ ] Load frontend
- [ ] Verify Script A outputs (first)
- [ ] Verify Script B skipped (duplicate)
- [ ] Screenshot: Page source showing first outputs, second skipped

#### Test 6.3: Admin Conflict Warning
- [ ] Keep both scripts from Test 6.2
- [ ] Go to Tracking Scripts list
- [ ] Verify admin error notice displays
- [ ] Verify shows both script names
- [ ] Verify edit links work
- [ ] Screenshot: Admin notice

### Phase 8: Admin UI Tests (30 min)

#### Test 7.1: Admin Columns Display
- [ ] Go to Tracking Scripts list
- [ ] Verify "Tracking IDs" column shows extracted IDs
- [ ] Verify "Placement" column shows values
- [ ] Verify "Scope" column shows Global/Specific
- [ ] Verify "Status" column shows Active/Inactive
- [ ] Screenshot: Admin columns

#### Test 7.2: Dynamic Scope Selector
- [ ] Edit any script
- [ ] Change scope to "Specific Pages"
- [ ] Verify Target Pages selector appears immediately (no page refresh)
- [ ] Change scope to "Global"
- [ ] Verify Target Pages selector hides immediately
- [ ] Screenshot: Scope selector behavior

## Test Results Template

### Test Execution Summary

```
Test Date: ___________
Tester: ___________
Environment: WordPress ___, PHP ___, Browser ___

Total Tests: ___
Passed: ___
Failed: ___
Blocked: ___

Pass Rate: ___%
```

### Failed Tests Log

```
Test ID: ____
Test Name: ____
Expected Result: ____
Actual Result: ____
Steps to Reproduce: ____
Screenshot: ____
Severity: Critical/High/Medium/Low
```

### Bug Reports

```
Bug #1:
Title: ____
Description: ____
Steps to Reproduce: ____
Expected: ____
Actual: ____
Screenshot: ____
Priority: ____
```

## Definition of Done

- [ ] All test phases executed
- [ ] All screenshots captured
- [ ] Test results documented
- [ ] All bugs filed
- [ ] Critical bugs fixed
- [ ] Re-test completed
- [ ] Sign-off from QA lead

## Notes

Generated: 2025-10-16

This comprehensive test execution ensures every feature works as expected before release. Any failures must be addressed before launch.
