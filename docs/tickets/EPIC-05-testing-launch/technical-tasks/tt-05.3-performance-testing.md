# TT-05.3: Performance Testing Execution

**Ticket Type:** Technical Task (Performance)
**Epic:** EPIC-05 Testing, Polish & Launch
**Time Estimate:** 2 hours
**Assignee:** Performance Team

## Description

Execute performance testing to validate plugin meets requirements: < 50ms page load impact, ≤ 2 database queries per page, and < 5MB memory usage.

## Test Setup

### Install Tools

```bash
wp plugin install query-monitor --activate
wp plugin install p3-profiler --activate
```

### Enable Debug
```php
// wp-config.php
define('WP_DEBUG', true);
define('SAVEQUERIES', true);
```

## Performance Tests

### Test 1: Baseline (No Plugin) - 20 min

**Steps:**
1. Deactivate GA Plugin
2. Clear all caches
3. Load homepage 3 times
4. Record metrics

**Results:**
```
Load Time: _____ ms
DB Queries: _____
Memory: _____ MB
```

### Test 2: With Plugin (4 Scripts) - 20 min

**Setup:**
- Create 4 scripts (head, body_top, body_bottom, footer)
- All active, all global

**Steps:**
1. Activate plugin
2. Clear caches
3. Load homepage 3 times
4. Record metrics

**Results:**
```
Load Time: _____ ms
DB Queries: _____
Memory: _____ MB
Plugin Impact: _____ ms
```

**Pass Criteria:**
- Impact < 50ms ✅/❌
- Queries ≤ 6 (baseline + 2) ✅/❌
- Memory < 5MB increase ✅/❌

### Test 3: Query Count Analysis - 20 min

**Using Query Monitor:**
1. Load page
2. Open Query Monitor
3. Go to "Queries by Component"
4. Find GA Plugin queries

**Expected:**
- head: 1 query
- body_top: 1 query
- body_bottom: 1 query
- footer: 1 query
- **Total: 4 queries**

**Actual:**
- Queries: _____
- Status: ✅ PASS / ❌ FAIL

### Test 4: Caching Verification - 20 min

**Steps:**
1. Add logging:
```php
error_log('GAP: Querying ' . $placement);
```
2. Load page
3. Check debug.log

**Expected:**
- Max 4 log entries (one per placement)

**Actual:**
- Log entries: _____
- Status: ✅ PASS / ❌ FAIL

### Test 5: Memory Usage - 15 min

**Using Query Monitor:**
1. Load page
2. Check "Environment" panel
3. Record memory

**Results:**
```
Baseline: _____ MB
With Plugin: _____ MB
Increase: _____ MB
Status: ✅ PASS / ❌ FAIL (< 5MB)
```

### Test 6: Stress Test (20 Scripts) - 30 min

**Setup:**
- Create 20 scripts (5 per placement)
- All active, all global

**Results:**
```
Queries: _____
Load Time: _____ ms
Memory: _____ MB
```

**Expected:**
- Still ≤ 4 queries (cached)
- Load time < 100ms acceptable
- Memory < 10MB acceptable

### Test 7: Page Load Impact (GTmetrix) - 20 min

1. Go to GTmetrix.com
2. Test baseline (no plugin)
3. Test with plugin
4. Compare

**Results:**
```
Baseline: _____ ms
With Plugin: _____ ms
Difference: _____ ms
Status: ✅ PASS / ❌ FAIL (< 50ms)
```

## Performance Report

```markdown
# Performance Test Results

Date: _____
Tester: _____

## Summary
- Page Load Impact: _____ ms (Target: <50ms) ✅/❌
- DB Queries: _____ (Target: ≤4) ✅/❌
- Memory Usage: _____ MB (Target: <5MB) ✅/❌

## Overall Status
✅ ALL REQUIREMENTS MET
❌ REQUIREMENTS NOT MET

Tester: ___________
```

## Definition of Done

- [ ] All tests executed
- [ ] All benchmarks met
- [ ] Performance report written
- [ ] Sign-off from performance lead

## Notes

Generated: 2025-10-16
