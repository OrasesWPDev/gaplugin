# TT-05.4: WordPress Coding Standards Validation

**Ticket Type:** Technical Task (Code Quality)
**Epic:** EPIC-05 Testing, Polish & Launch
**Time Estimate:** 1 hour
**Assignee:** Development Team

## Description

Validate all PHP code against WordPress coding standards using PHPCS (PHP_CodeSniffer) to ensure consistency, maintainability, and adherence to WordPress best practices.

## Setup PHPCS

### Installation

```bash
# Install PHP_CodeSniffer globally
composer global require "squizlabs/php_codesniffer=*"

# Install WordPress coding standards
composer global require wp-coding-standards/wpcs

# Set installed paths
phpcs --config-set installed_paths ~/.composer/vendor/wp-coding-standards/wpcs

# Verify installation
phpcs -i
```

**Expected Output:**
```
The installed coding standards are MySource, PEAR, PSR1, PSR2, PSR12, Squiz, Zend, WordPress, WordPress-Core, WordPress-Docs and WordPress-Extra
```

## Run PHPCS

### Validate All Files

```bash
# Check main plugin file
phpcs --standard=WordPress ga-plugin.php

# Check includes directory
phpcs --standard=WordPress includes/

# Generate report
phpcs --standard=WordPress --report=summary ga-plugin.php includes/ > phpcs-report.txt
```

### Check Specific Standards

**WordPress-Core:**
```bash
phpcs --standard=WordPress-Core includes/
```

**WordPress-Docs (documentation):**
```bash
phpcs --standard=WordPress-Docs includes/
```

## Validation Checklist

### File-by-File Check

- [ ] `ga-plugin.php`
  ```bash
  phpcs --standard=WordPress ga-plugin.php
  ```
  Errors: ___
  Warnings: ___
  Status: ✅/❌

- [ ] `includes/class-gap-activator.php`
  ```bash
  phpcs --standard=WordPress includes/class-gap-activator.php
  ```
  Errors: ___
  Warnings: ___
  Status: ✅/❌

- [ ] `includes/class-gap-cpt.php`
  ```bash
  phpcs --standard=WordPress includes/class-gap-cpt.php
  ```
  Errors: ___
  Warnings: ___
  Status: ✅/❌

- [ ] `includes/class-gap-meta-boxes.php`
  ```bash
  phpcs --standard=WordPress includes/class-gap-meta-boxes.php
  ```
  Errors: ___
  Warnings: ___
  Status: ✅/❌

- [ ] `includes/class-gap-conflict-detector.php`
  ```bash
  phpcs --standard=WordPress includes/class-gap-conflict-detector.php
  ```
  Errors: ___
  Warnings: ___
  Status: ✅/❌

- [ ] `includes/class-gap-frontend.php`
  ```bash
  phpcs --standard=WordPress includes/class-gap-frontend.php
  ```
  Errors: ___
  Warnings: ___
  Status: ✅/❌

- [ ] `includes/class-gap-admin.php`
  ```bash
  phpcs --standard=WordPress includes/class-gap-admin.php
  ```
  Errors: ___
  Warnings: ___
  Status: ✅/❌

## Common Standards to Verify

### Naming Conventions
- [ ] Class names: `GAP_Class_Name` (uppercase, underscores)
- [ ] Function names: `gap_function_name()` (lowercase, underscores)
- [ ] Variable names: `$variable_name` (lowercase, underscores)
- [ ] Constant names: `GAP_CONSTANT` (uppercase, underscores)

### Indentation
- [ ] Tabs (not spaces) for indentation
- [ ] Spaces for alignment
- [ ] Consistent indentation throughout

### Yoda Conditions
- [ ] Use Yoda conditions for comparisons
  ```php
  // Good
  if ( 'value' === $variable ) {}

  // Bad
  if ( $variable === 'value' ) {}
  ```

### Spacing
- [ ] Space after control structures: `if (`, `while (`, `foreach (`
- [ ] Space around operators: `$a = $b + $c;`
- [ ] No space before semicolons: `echo 'text';`

### Documentation
- [ ] All files have file docblocks
- [ ] All classes have class docblocks
- [ ] All methods have docblocks
- [ ] All parameters documented with `@param`
- [ ] All returns documented with `@return`

## Fix Common Issues

### Auto-Fix with PHPCBF

```bash
# Auto-fix fixable issues
phpcbf --standard=WordPress ga-plugin.php
phpcbf --standard=WordPress includes/
```

### Manual Fixes

**Issue:** Yoda conditions
```php
// Before
if ($value === 'something') {}

// After
if ('something' === $value) {}
```

**Issue:** Indentation
```php
// Before (spaces)
    function example() {
        return true;
    }

// After (tabs)
→   function example() {
→   →   return true;
→   }
```

**Issue:** Missing docblock
```php
// Before
public function method() {}

// After
/**
 * Method description
 *
 * @since 1.0.0
 * @return void
 */
public function method() {}
```

## PHPCS Report Format

```
FILE: /path/to/ga-plugin.php
----------------------------------------------------------------------
FOUND 0 ERRORS AND 0 WARNINGS AFFECTING 0 LINES
----------------------------------------------------------------------

FILE: /path/to/includes/class-gap-cpt.php
----------------------------------------------------------------------
FOUND 0 ERRORS AND 0 WARNINGS AFFECTING 0 LINES
----------------------------------------------------------------------

...

Time: 500ms; Memory: 10MB
```

## Validation Report

```markdown
# WordPress Coding Standards Validation

Date: _____
Validator: _____

## Summary
- Total Files: 7
- Errors: _____
- Warnings: _____

## Results by File
- ga-plugin.php: ✅ PASS / ❌ FAIL
- class-gap-activator.php: ✅ PASS / ❌ FAIL
- class-gap-cpt.php: ✅ PASS / ❌ FAIL
- class-gap-meta-boxes.php: ✅ PASS / ❌ FAIL
- class-gap-conflict-detector.php: ✅ PASS / ❌ FAIL
- class-gap-frontend.php: ✅ PASS / ❌ FAIL
- class-gap-admin.php: ✅ PASS / ❌ FAIL

## Overall Status
✅ ALL FILES PASS
❌ FIXES REQUIRED

## Issues Found
[List any remaining issues]

## Sign-off
Validator: ___________
Date: ___________
```

## Definition of Done

- [ ] PHPCS installed and configured
- [ ] All files scanned
- [ ] All errors fixed
- [ ] All critical warnings fixed
- [ ] Report generated
- [ ] Zero errors remaining
- [ ] Sign-off from code quality lead

## Notes

Generated: 2025-10-16

WordPress coding standards ensure consistency and maintainability. All code must pass before release.
