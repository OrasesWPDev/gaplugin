# US-05.5: Release Preparation

**Ticket Type:** User Story
**Epic:** EPIC-05 Testing, Polish & Launch
**Story Points:** 3
**Time Estimate:** 135 minutes

## Description

As a project manager, I need the plugin ready for release so that we can deliver version 1.0.0 to production with confidence, proper versioning, GitHub release, and distribution package.

This finalizes all release preparation including version number consistency, GitHub repository setup, release notes, tagging, and creating the distribution ZIP file.

## Acceptance Criteria

- [ ] Version numbers consistent across all files
- [ ] GitHub repository prepared
- [ ] Release notes written
- [ ] Version 1.0.0 tagged
- [ ] ZIP file created for distribution
- [ ] Installation tested from ZIP

## Implementation Tasks

- [ ] Update version numbers (15 min)
- [ ] Create GitHub release notes (30 min)
- [ ] Tag version 1.0.0 (10 min)
- [ ] Create distribution ZIP (20 min)
- [ ] Test installation from ZIP (30 min)
- [ ] Prepare deployment checklist (30 min)

## Version Number Updates

### Files to Update

#### 1. ga-plugin.php (Plugin Header)
```php
/**
 * Plugin Name: GA Plugin
 * Plugin URI:  https://github.com/OrasesWPDev/ga-plugin
 * Description: Enterprise-grade Google Analytics and Google Tag Manager script management with automatic duplicate detection.
 * Version:     1.0.0
 * Author:      Orases
 * Author URI:  https://www.orases.com
 * License:     GPL v2 or later
 * License URI: https://www.gnu.org/licenses/gpl-2.0.html
 * Text Domain: ga-plugin
 * Domain Path: /languages
 */
```

#### 2. ga-plugin.php (Constant)
```php
if (!defined('GAP_VERSION')) {
    define('GAP_VERSION', '1.0.0');
}
```

#### 3. README.md
```markdown
# GA Plugin

**Version:** 1.0.0
**Requires WordPress:** 6.0+
**Requires PHP:** 7.4+
```

#### 4. CHANGELOG.md
```markdown
## [1.0.0] - 2025-01-[XX]
```

Update date when releasing.

#### 5. package.json (if exists)
```json
{
  "name": "ga-plugin",
  "version": "1.0.0",
  ...
}
```

### Version Consistency Check

```bash
# Check all version references
grep -r "Version:" ga-plugin.php
grep -r "GAP_VERSION" ga-plugin.php
grep -r "version" package.json
grep -r "\[1.0.0\]" CHANGELOG.md
```

All should show **1.0.0**

## GitHub Release Preparation

### 1. Push All Code

```bash
git status
git add .
git commit -m "chore: prepare for v1.0.0 release"
git push origin main
```

### 2. Create Release Notes

**File:** `release-notes-1.0.0.md`

```markdown
# GA Plugin v1.0.0 - Initial Release

🎉 **First stable release of GA Plugin!**

## Overview

GA Plugin provides enterprise-grade management of Google Analytics 4 (GA4) and Google Tag Manager (GTM) tracking scripts with automatic duplicate detection for WordPress.

## ✨ Key Features

### Core Functionality
- **Custom Post Type** for managing tracking scripts
- **Automatic Duplicate Detection** - Prevent double-tracking from themes and plugins
- **Multiple Placement Options** - head, body top, body bottom, footer
- **Scope Control** - Global or page-specific script loading
- **Performance Optimized** - < 50ms impact, ≤ 2 queries per page

### Duplicate Detection
- Automatic GA4 and GTM tracking ID extraction
- Real-time HTML scanning for existing scripts
- Admin warnings when conflicts detected
- Prevents double-tracking automatically

### Admin Experience
- Clean, intuitive interface
- Visual tracking ID display in admin columns
- Dynamic UI for scope selection
- Conflict warnings with edit links

### Security & Performance
- Nonce verification on all forms
- Capability checks (manage_options)
- Input sanitization and output escaping
- Request-level caching for efficiency

## 📋 Requirements

- WordPress 6.0 or higher
- PHP 7.4 or higher
- Modern browser (Chrome, Firefox, Safari, Edge)

## 📦 Installation

### From ZIP
1. Download `ga-plugin.zip` from this release
2. Go to WordPress admin → Plugins → Add New → Upload Plugin
3. Choose downloaded ZIP file
4. Click Install Now → Activate

### From GitHub
```bash
cd wp-content/plugins
git clone https://github.com/OrasesWPDev/ga-plugin.git
```

## 🚀 Quick Start

1. Navigate to **Tracking Scripts → Add New**
2. Paste your GA4 or GTM code
3. Select placement and scope
4. Click Publish
5. Done! The plugin handles the rest

## 📚 Documentation

- [README](README.md) - Complete usage guide
- [CHANGELOG](CHANGELOG.md) - All changes
- [LICENSE](LICENSE) - GPL v2+

## 🔗 Links

- [GitHub Repository](https://github.com/OrasesWPDev/ga-plugin)
- [Issue Tracker](https://github.com/OrasesWPDev/ga-plugin/issues)
- [Orases Website](https://www.orases.com)

## 🙏 Credits

**Developed by:** [Orases](https://www.orases.com)

## 📄 License

GPL v2 or later

---

**Download:** See assets below ⬇️
```

### 3. Create GitHub Release

**Via GitHub Web Interface:**

1. Go to repository on GitHub
2. Click **Releases** → **Create a new release**
3. Tag version: `v1.0.0`
4. Target: `main` branch
5. Release title: `GA Plugin v1.0.0`
6. Description: Paste release notes from above
7. Attach `ga-plugin.zip` (see below)
8. Click **Publish release**

**Via GitHub CLI:**

```bash
gh release create v1.0.0 \
  --title "GA Plugin v1.0.0" \
  --notes-file release-notes-1.0.0.md \
  ga-plugin.zip
```

### 4. Tag Version

```bash
git tag -a v1.0.0 -m "Release version 1.0.0"
git push origin v1.0.0
```

## Distribution ZIP Creation

### Method 1: Manual Creation

**Steps:**

1. Clone fresh copy of repository:
```bash
cd /tmp
git clone https://github.com/OrasesWPDev/ga-plugin.git ga-plugin-build
cd ga-plugin-build
```

2. Remove development files:
```bash
rm -rf .git
rm -rf .github
rm .gitignore
rm -rf docs/tickets  # Optional: keep or remove
rm -rf node_modules  # If any
rm package.json      # If any
rm package-lock.json # If any
rm composer.json     # If any
rm composer.lock     # If any
```

3. Create ZIP:
```bash
cd ..
zip -r ga-plugin.zip ga-plugin-build
mv ga-plugin.zip ~/ga-plugin-1.0.0.zip
```

### Method 2: Using Script

**File:** `create-release.sh`

```bash
#!/bin/bash

VERSION="1.0.0"
PLUGIN_SLUG="ga-plugin"
BUILD_DIR="/tmp/${PLUGIN_SLUG}-build"
ZIP_NAME="${PLUGIN_SLUG}-${VERSION}.zip"

# Clean previous build
rm -rf $BUILD_DIR

# Clone repository
git clone https://github.com/OrasesWPDev/${PLUGIN_SLUG}.git $BUILD_DIR

# Navigate to build directory
cd $BUILD_DIR

# Remove development files
rm -rf .git .github .gitignore
rm -rf docs/tickets
rm -rf node_modules
rm -f package.json package-lock.json
rm -f composer.json composer.lock

# Create ZIP
cd ..
zip -r $ZIP_NAME ${PLUGIN_SLUG}-build

echo "✅ Created: $ZIP_NAME"
echo "📍 Location: $(pwd)/$ZIP_NAME"
```

**Usage:**
```bash
chmod +x create-release.sh
./create-release.sh
```

### Files to Include in ZIP

**Required:**
- `ga-plugin.php`
- `includes/` (all files)
- `LICENSE`
- `README.md`
- `CHANGELOG.md`

**Optional:**
- `docs/` (documentation)
- `languages/` (translations, if any)

**Exclude:**
- `.git/`
- `.github/`
- `.gitignore`
- `docs/tickets/`
- `node_modules/`
- Development config files

## Installation Testing

### Test 1: Fresh Install

1. Set up clean WordPress install
2. Upload `ga-plugin.zip` via WordPress admin
3. Activate plugin
4. **Expected:** No errors
5. **Expected:** Tracking Scripts menu appears
6. Create test script
7. **Expected:** Saves correctly
8. Load frontend
9. **Expected:** Script outputs correctly

### Test 2: Upgrade (Simulate)

1. Install older version (if exists)
2. Upload new `ga-plugin.zip`
3. Click "Update Now"
4. **Expected:** Updates successfully
5. **Expected:** Settings preserved
6. **Expected:** No data loss

### Test 3: Multisite

1. Set up WordPress multisite
2. Network activate plugin
3. **Expected:** Available on all sites
4. Test on subsite
5. **Expected:** Works independently

## Deployment Checklist

### Pre-Release
- [ ] All tests passing (functional, security, performance)
- [ ] All documentation complete
- [ ] Version numbers consistent
- [ ] CHANGELOG.md updated
- [ ] README.md accurate
- [ ] No debug code remaining
- [ ] No console.log() statements
- [ ] No TODO comments

### GitHub
- [ ] All code committed
- [ ] Pushed to main branch
- [ ] Release notes written
- [ ] Version tagged (v1.0.0)
- [ ] GitHub release created
- [ ] ZIP uploaded to release

### Distribution
- [ ] ZIP file created
- [ ] ZIP file tested (fresh install)
- [ ] File size reasonable (< 500KB expected)
- [ ] No development files in ZIP

### Communication
- [ ] Announcement prepared
- [ ] Support channels notified
- [ ] Documentation links shared

### Post-Release
- [ ] Monitor error logs
- [ ] Watch for issues reported
- [ ] Respond to support requests
- [ ] Plan v1.1 enhancements

## Release Verification

### Checklist

```bash
# 1. Version consistency
grep "Version:" ga-plugin.php        # Should show 1.0.0
grep "GAP_VERSION" ga-plugin.php     # Should show 1.0.0

# 2. Git status
git status                           # Should be clean

# 3. Git tags
git tag                              # Should include v1.0.0

# 4. GitHub release
gh release view v1.0.0               # Should show release details

# 5. ZIP contents
unzip -l ga-plugin.zip               # Should list plugin files
```

### Expected Results

- [ ] Version: 1.0.0 everywhere
- [ ] Git: Clean working directory
- [ ] Tags: v1.0.0 exists
- [ ] GitHub: Release published
- [ ] ZIP: Valid and tested

## Support Plan

### Week 1 (Launch Week)
- Monitor error logs daily
- Respond to issues within 24 hours
- Fix critical bugs immediately
- Track activation success rate

### Month 1
- Gather user feedback
- Identify common issues
- Plan bug fixes
- Prepare v1.0.1 patch if needed

### Ongoing
- Monthly minor releases (v1.x)
- Quarterly feature releases (vX.0)
- Annual major releases (vX.0.0)

## Dependencies

- All previous tickets complete
- All EPICs complete (01-04)
- All testing complete (US-05.1, US-05.2, US-05.3)
- All documentation complete (US-05.4)

## Definition of Done

- [ ] Version numbers updated
- [ ] GitHub repository ready
- [ ] Release notes written
- [ ] Version 1.0.0 tagged
- [ ] Distribution ZIP created
- [ ] Installation tested
- [ ] Deployment checklist complete
- [ ] Release published on GitHub
- [ ] Sign-off from project manager
- [ ] 🚀 **READY FOR LAUNCH!**

## Notes

Generated: 2025-10-16

This is the final step before launch. Everything must be perfect - version numbers, documentation, packaging, and distribution. The release represents months of work and sets the foundation for future development.
